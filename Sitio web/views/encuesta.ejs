<script src="https://ajax.googleapis[2]om/ajax/libs/angularjs/1.5.8/angular.js"></script>

<div class="well">
	<p>
		Bienvenido, <%= ( user.nombre.indexOf(" ") == -1) ? user.nombre : user.nombre.substr(0, user.nombre.indexOf(" ")) %>.<br>
		Encuesta pendiente. Rellene el formulario a continuación.<br>
		Numere con un 4 a la terminación que mejor se ajuste a su forma de aprender, y con un 1 a la que peor se ajuste.
	</p>
</div>

<style>
table {
	width: 75%;
	text-align: center;
	margin-left: auto;
	margin-right: auto;
}

td {
	height: 40px;
	width: 100px;
}

input {
	text-align: center;
}
</style>

<div ng-app="encuestaAPP" class="container">
	<form ng-controller="encuestaCTRL" ng-submit="enviarEncuesta()">
		<div class="panel-group">

			<div class="panel panel-default">
				<div class="panel-heading"><label>1. Cuando aprendo...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>me gusta vivir sensaciones</td>
							<td>me gusta pensar sobre ideas</td>
							<td>me gusta estar haciendo cosas</td>
							<td>me gusta observar y escuchar</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[0][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[0][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[0][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[0][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>2. Aprendo mejor cuando...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>escucho y observo cuidadosamente</td>
							<td>confío en el pensamiento lógico</td>
							<td>confío en mi intuición y sentimientos</td>
							<td>trabajo duro para lograr hacer las cosas</td>
						<tr>
							<td><input type='text' ng-model="resp[1][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[1][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[1][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[1][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>3. Cuando estoy aprendiendo...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>tiendo a usar el razonamiento</td>
							<td>soy responsable con lo que hago</td>
							<td>soy callado y reservado</td>
							<td>tengo fuertes sensaciones y reacciones</td>
						<tr>
							<td><input type='text' ng-model="resp[2][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[2][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[2][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[2][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>4. Yo aprendo...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>sientiendo</td>
							<td>haciendo</td>
							<td>observando</td>
							<td>pensando</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[3][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[3][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[3][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[3][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>5. Cuando aprendo...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>estoy abierto a nuevas experiencias</td>
							<td>observo todos los aspectos del asunto</td>
							<td>me gusta analizar las cosas, descomponerlas en sus partes</td>
							<td>me gusta probar e intentar hacer las cosas</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[4][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[4][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[4][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[4][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>6. Cuando estoy aprendiendo...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>soy una persona observadora</td>
							<td>soy una persona activa</td>
							<td>soy una persona intuitiva</td>
							<td>soy una persona lógica</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[5][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[5][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[5][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[5][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>7. Yo aprendo mejor de...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>la observación</td>
							<td>la relación con otras personas</td>
							<td>las teorías racionales</td>
							<td>la oportunidad de probar y practicar</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[6][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[6][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[6][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[6][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>8. Cuando aprendo...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>me gusta ver los resultados de mi trabajo</td>
							<td>me gustan las ideas y las teorías</td>
							<td>me tomo mi tiempo antes de actuar</td>
							<td>me siento personalmente involucrado en las cosas</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[7][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[7][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[7][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[7][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>9. Aprendo mejor cuando...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>confío en mis observaciones</td>
							<td>confío en mis sentimientos</td>
							<td>puedo probar por mi cuenta</td>
							<td>confío en mis ideas</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[8][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[8][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[8][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[8][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>10. Cuando estoy aprendiendo...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>soy una persona reservada</td>
							<td>soy una persona receptiva</td>
							<td>soy una persona responsable</td>
							<td>soy una persona racional</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[9][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[9][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[9][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[9][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>11. Cuando aprendo...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>me involucro</td>
							<td>me gusta observar</td>
							<td>evalúo las cosas</td>
							<td>me gusta ser activo</td>
						</tr>
						<tr>
							<td><input type='text' ng-model="resp[10][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[10][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[10][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[10][3]" maxlength="1" size="1" required/></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading"><label>12. Aprendo mejor cuando...</label></div>
				<div class="panel-body">
					<table>
						<tr>
							<td>analizo ideas</td>
							<td>soy receptivo y abierto</td>
							<td>soy cuidadoso</td>
							<td>soy práctico</td>
						</tr>
							<td><input type='text' ng-model="resp[11][0]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[11][1]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[11][2]" maxlength="1" size="1" required/></td>
							<td><input type='text' ng-model="resp[11][3]" maxlength="1" size="1" required/></td>
						</td>
					</table>
				</div>
			</div>

		</div>

		<center>
			<button type="reset" class="btn btn-danger">Reiniciar encuesta</button>
			<button type="submit" class="btn btn-success">Enviar respuestas</button>
		</center>

		<code>Label = {{ resp[0][0] }}</code><br/>

	</form>
</div>

<script>
angular.module('encuestaAPP', []).controller('encuestaCTRL', function($scope, $http, $log, $window)
{
	$scope.resp = new Array(12);
	$scope.respuestas = ['1', '2', '3', '4'];

	//$log.info($scope.resp.length);
	//$log.info($scope.respuestas.length);

	for (i = 0; i < $scope.resp.length; i++)
	{
		$scope.resp[i] = new Array(4);
		for (j = 0; j < $scope.respuestas.length; j++)
			$scope.resp[i][j] = $scope.respuestas[j];
	}

	$scope.enviarEncuesta = function()
	{
		$http ({
			method: 'POST',
			url: '/encuesta',
			data:
			{
				respuestas: $scope.resp
			}
		}).then(function successCallback(response)
		{
			$window.location.href='/encuesta';
		});
	}
});
</script>
